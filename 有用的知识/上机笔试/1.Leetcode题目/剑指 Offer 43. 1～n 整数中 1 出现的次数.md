#### [剑指 Offer 43. 1～n 整数中 1 出现的次数](https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/)

难度困难317

输入一个整数 `n` ，求1～n这n个整数的十进制表示中1出现的次数。

例如，输入12，1～12这些整数中包含1 的数字有1、10、11和12，1一共出现了5次。

 

**示例 1：**

```
输入：n = 12
输出：5
```





#### 题解：枚举每一数位上 1 的个数

根据题目要求，我们需要统计 [1, n] 内所有整数中，数字 1 出现的个数。由于 n 的范围最大为 2^{31} - 1，**它是一个 10 位整数**，因此我们可以考虑枚举每一个数位，分别统计该数位上数字 1 出现的次数，最后将所有数位统计出的次数进行累加即可得到答案。

以 `n = 1234567` 为例，我们需要统计「百位」上数字 1 出现的次数。我们知道，对于从 0 开始每 1000 个数，「百位」上的数字 1 都会出现 100 次，也就是100~199这100个数字。那么，n 拥有 1234 个这样的循环，每个循环「百位」上都出现了 100 次 1，这样就一共出现了1234×100 次 1。对于普遍的数位k，则有：`(n // (10**k)) * (10**k)`次。

同时，对于后面的`n' = 567`（`n' = n % (10**(k+1))`）,它是不在完整的循环中的部分。这一部分有多少个百位上的1呢？我们来分类讨论一下：

- 当 n' < 100  时，「百位」上不会出现 1；

- 100≤n<200 时，「百位」上出现了 n' - 100 + 1 次 1
- 当 n'  ≥200 时，「百位」上出现了全部 100 次 1。

这个例子深入人心之后就很好写出代码喽！

```python
class Solution:
    def countDigitOne(self, n: int) -> int:

        def calc_digit_one(k): ##计算第k位上面的1出现次数
            ans = 0
            ans += (n // (10**(k+1))) * (10**k)
            n_ = n % (10**(k+1))
            if 10**k <= n_ and (10**k)*2 > n_:
                ans += n_ - (10**k) + 1
            if n_ >= 10**k*2:
                ans += 10**k
            return ans
        tot = 0
        for i in range(10):
            ans = calc_digit_one(i)
            print(ans)
            tot+= ans
        return tot
```

