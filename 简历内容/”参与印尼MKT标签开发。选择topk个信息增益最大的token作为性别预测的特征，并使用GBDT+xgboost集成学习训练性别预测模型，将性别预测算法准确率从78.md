”参与印尼MKT标签开发。选择topk个信息增益最大的token作为性别预测的特征，并使用GBDT+xgboost集成学习训练性别预测模型，将性别预测算法准确率从78.2%提升到83.7% “

背景：

泰国站中的”性别“字段很多都是缺失的，为我们后续的推荐算法造成了一些不便，所以MKT用户标签项目就是要补充这些缺失字段。用户的性别和TA购买过的东西有着非常强的相关性，我们就把用户购买过的所有商品的名称放在一起（由于泰国站的商品名称字段是中英混杂的，所以需要事先翻译成英文）。但是，这样导致我们的token特征太多了，而有理由相信，有很多的特征token是无关紧要的，为了节省计算量可以将其删去。

那么，怎样去掉这些不重要的特征呢？或者说，怎样去评估特征的重要度呢？

一个重要的特征是那种特别能够区分出”男“/”女“的，比如"pink"/"dress"明显是女性化的特征，而"basketball"/"video game"是男性化的特征。我们采用信息增益和卡方独立性检验来判断特征的重要程度。

**信息增益：**

就是决策树中的信息增益，原先的信息熵为 −plogp, 而按照某个特征划分之后的信息熵为 −|S+||S|p+logp+−|S−||S|p−logp−.

我们去看这个information gain对于哪个token是最大的。

**卡方独立性检验：**

计算一个理论值和实际值，计算卡方值：

 [![\chi^2 = \sum \frac{(A-T)^2}{T}](https://camo.githubusercontent.com/ef9f4ce9c60a0ea4d424b4310bf5f2b942347c46bec55b4c44658699710f96ed/68747470733a2f2f7777772e7a686968752e636f6d2f6571756174696f6e3f7465783d2535436368692535453225323025334425323025354373756d2532302535436672616325374228412d54292535453225374425374254253744)](https://camo.githubusercontent.com/ef9f4ce9c60a0ea4d424b4310bf5f2b942347c46bec55b4c44658699710f96ed/68747470733a2f2f7777772e7a686968752e636f6d2f6571756174696f6e3f7465783d2535436368692535453225323025334425323025354373756d2532302535436672616325374228412d54292535453225374425374254253744)

我们假设统计量服从自由度为 **V=(行数-1)\*(列数-1)** 的卡方分布，然后看$\chi ^ 2$是否在拒绝域内，如果在拒绝域内则拒绝原假设（即：关于变量独立），认为变量是有”区分度“的。这里的p值为P(t > obs), 如果p值越小，则说明越显著（在分布的越边缘位置），我们就**更有理由去拒绝原假设**。